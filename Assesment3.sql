CREATE DATABASE Assment3db
--drop table Products
CREATE TABLE Products
(
  ID int NOT NULL PRIMARY KEY,
  Name VARCHAR(255) NOT NULL,
  Price money
);
--drop table Orders
CREATE TABLE Orders
(
  ID int NOT NULL,
  ProductID int NOT NULL,
  CustomerID int NOT NULL,
);
--drop table Customers
CREATE TABLE Customers
(
  ID int NOT NULL PRIMARY KEY,
  FirstName VARCHAR(255) NOT NULL,
  LastName VARCHAR(255) NOT NULL,
  CardNumber Varchar(16)
);

ALTER TABLE Orders
ADD CONSTRAINT FK_ProductID
FOREIGN KEY (ID) 
REFERENCES Products(ID);

ALTER TABLE Orders
ADD CONSTRAINT FK_CustomerID
FOREIGN KEY (ID) 
REFERENCES Customers(ID);

INSERT INTO Products
  (id,Name, Price)
VALUES
  ( 1, 'IPhone', $200);
INSERT INTO Products
  (id,Name, Price)
VALUES
  ( 2, 'Laptop', $1200);
INSERT INTO Products
  (id,Name, Price)
VALUES
  ( 3, 'Robot', $20000);

--select * from Products
--
INSERT INTO Customers
  (ID, FirstName, LastName,CardNumber)
VALUES
  (1, 'Tina', 'Smith', 2345897678988787);
INSERT INTO Customers
  (ID, FirstName, LastName,CardNumber)
VALUES
  (2, 'Jimmy', 'Smith', 2340000678988787);
INSERT INTO Customers
  (ID, FirstName, LastName,CardNumber)
VALUES
  (3, 'Tina', 'Smith', 2345897678555587);
--select * from Customers

INSERT INTO Orders
  (ID, ProductID, CustomerID)
VALUES
  (1, 1, 1)
INSERT INTO Orders
  (ID, ProductID, CustomerID)
VALUES
  (2, 3, 2)
INSERT INTO Orders
  (ID, ProductID, CustomerID)
VALUES
  (3, 2, 3)

--select * from Orders

--report all orders by tina smith --
SELECT Customers.ID, FirstName, LastName, Orders.ID, Orders.ProductID
FROM Customers
  INNER JOIN Orders ON 
Customers.ID = ORDERS.CustomerID
where CustomerID = 1;

--report all revenure generated by sales of IPhone
--select * from Orders

--prob need to use coalsce here

--increase the price of iphone to 250
UPDATE Products
SET Price = 250
WHERE Products.ID = 1;
